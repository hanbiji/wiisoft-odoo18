<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 租赁合同发票列表视图 -->
    <record id="view_lease_invoice_tree" model="ir.ui.view">
        <field name="name">mall.leasing.invoice.tree</field>
        <field name="model">account.move</field>
        <field name="arch" type="xml">
            <list string="租赁合同发票" create="false" decoration-danger="payment_state == 'not_paid' and invoice_date_due &lt; context_today().strftime('%Y-%m-%d')" decoration-success="payment_state == 'paid'">
                <field name="name" string="发票号"/>
                <field name="partner_id" string="客户"/>
                <field name="ref" string="参考号"/>
                <field name="invoice_date" string="账单日期"/>
                <field name="invoice_date_due" string="到期日期"/>
                <field name="amount_untaxed" sum="不含税金额"/>
                <field name="amount_total" sum="总金额" string="总金额"/>
                <field name="payment_state" 
                    widget="badge" 
                    decoration-info="payment_state == 'not_paid'" 
                    decoration-success="payment_state == 'paid'" 
                    decoration-warning="payment_state == 'partial'"
                    string="支付状态"/>
            </list>
        </field>
    </record>

    <!-- 租赁合同发票表单视图（继承标准视图，添加额外信息） -->
    <record id="view_lease_invoice_form" model="ir.ui.view">
        <field name="name">mall.leasing.invoice.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <xpath expr="//form" position="attributes">
                <attribute name="string">租赁合同发票</attribute>
            </xpath>
        </field>
    </record>
    
</odoo>

